<div class="content-wrapper">
    <div class="content-body">
        <!-- content-header component -->
        <app-content-header [contentHeader]="contentHeader"></app-content-header>

        <!-- Basic Alerts start -->
        <section id="sample-page">
            <!-- header-navbar navbar navbar-expand-lg align-items-center navbar-shadow navbar-light floating-nav -->
            <div class="card">
                <div class="row">
                    <div class="form-group col-md-12">
                        <p-dialog class="mt-2" [(visible)]="addDisplayModal" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-contol">

                                        <input type="text" class="form-control" placeholder="name" #addGroup name="" id="">
                                    </div>
                                </div>
                            </div>
                            <ng-template pTemplate="footer">
                                <button icon="pi pi-check" (click)="add(addGroup)" label="Add" class="btn btn-primary btn-next">{{'ADD' | translate}}</button>
                            </ng-template>
                        </p-dialog>
                        <button (click)="showAddModalDialog()" type="button" class="btn btn-outline-primary mt-1 ml-1" rippleEffect>
                            <span [data-feather]="'plus'" [class]="'mr-25'"></span> {{'ADD' | translate}}
                        </button>

                        <!-- <button (click)="showAddModalDialog()" class="btn btn-primary btn-next"> <i
                                class="pi pi-plus-circle" style="font-size: 2rem"></i>
                            <span class="icon-span">{{'ADD' | translate}}</span> </button> -->
                    </div>
                    <div class="form-group col-md-12">


                        <p-table [value]="groups" [paginator]="true" [lazy]="true" [loading]="loading" [rows]="7">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>{{'Code' | translate}}</th>
                                    <th>{{'Name' | translate}}</th>
                                    <th>{{'Update' | translate}}</th>
                                    <th>{{'Action' | translate}}</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-item>
                                <tr>
                                    <td>{{item.id}}</td>
                                    <td>{{item.group_name}}</td>
                                    <td>{{item.updated_at |date}}</td>
                                    <td>
                                        <button type="button" (click)="OpenEdit(item)" class="btn btn-gradient-success ">{{'Edit'|translate}}</button>
                                        <button type="button" (click)="remove(item)" class="btn btn-gradient-danger ml-1">{{'Delete'|translate}}</button>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <p-dialog header="Edit" [(visible)]="editDisplayModal" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
                
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-contol">
                                <div class="row">
                                    <div class="col-4 mt-1" *ngFor="let item of GroupsPermissions">
                                        <button style="padding: 20px;
                                        padding-bottom: 35px;" type="button" class="btn btn-outline-primary form-control " rippleEffect>
                                            <div *ngIf="item.selected == true" (click)="item.selected = false" class="custom-control custom-control-success custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="colorCheck3" checked />
                                                <label class="custom-control-label" for="colorCheck5"></label>
                                                <span (click)="item.edit = true" *ngIf="item?.edit == false">
                                                    {{item.permission_name}}
                                                </span>
                                            </div>
                                            <div *ngIf="item.selected == false" (click)="item.selected = true" class="custom-control custom-control-danger custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="colorCheck5" checked />
                                                <label class="custom-control-label" for="colorCheck5"></label>
                                                <span (click)="item.edit = true" *ngIf="item?.edit == false">
                                                    {{item.permission_name}}
                                                </span>
                                            </div>
                                        </button>
                                        <br>
                                    </div>
                                </div>
                                <!-- <p-table [value]="GroupsPermissions" [paginator]="true" [lazy]="true" [loading]="loading" [rows]="7" [filterDelay]="true">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>{{'Code' | translate}}</th>
                                            <th>{{'Name' | translate}}</th>
                                            <th>{{'Selected' | translate}}</th>
                                            <th *ngIf="item?.edit == true">
                                                {{'Action' | translate}}
                                            </th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-item>
                                        <tr>
                                            <td>{{item.id}}</td>
                                            <td>
                                                <span (click)="item.edit = true" *ngIf="item?.edit == false">
                                                    {{item.permission_name}}
                                                </span>
                                                <span *ngIf="item?.edit == true">
                                                    <input type="text" [(ngModel)]="item.permission_name"
                                                        (keydown.enter)="SaveNewPerm(item)" class="form-control">
                                                </span>
                                            </td>
                                            <td>
                                                <div *ngIf="item.selected == true" (click)="item.selected = false" class="custom-control custom-control-success custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="colorCheck3" checked />
                                                    <label class="custom-control-label" for="colorCheck5"></label>

                                                </div>
                                                <div *ngIf="item.selected == false" (click)="item.selected = true" class="custom-control custom-control-danger custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="colorCheck5" checked />
                                                    <label class="custom-control-label" for="colorCheck5"></label>
                                                </div>
                                            </td>
                                            <td *ngIf="item?.edit == true">
                                                <button type="button" (click)=" DeleteNewPerm(item)" class="btn btn-gradient-danger">{{'Cancel'|translate}}</button>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table> -->
                                <button type="button" style="float: right;" (click)="UpdateGroupPermisions()" class="btn btn-gradient-success mt-1">{{'Save'|translate}}</button>
                            </div>
                        </div>
                    </div>
                </p-dialog>
            </div>
        </section>
        <!-- Basic Alerts end -->
    </div>
</div>